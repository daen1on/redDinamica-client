<div class="teacher-dashboard">
  <div class="dashboard-header">
    <h2><i class="fas fa-chalkboard-teacher"></i> Panel de Docente</h2>
    <p class="text-muted">Gestiona tus grupos académicos y lecciones</p>
  </div>

  <div *ngIf="loading" class="loading-container">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-3">Cargando datos del dashboard...</p>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
  </div>

  <div *ngIf="!loading && !errorMessage" class="dashboard-content">
    <!-- Estadísticas generales -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
          <h3>{{ totalStudents }}</h3>
          <p>Total Estudiantes</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-layer-group"></i>
        </div>
        <div class="stat-content">
          <h3>{{ totalGroups }}</h3>
          <p>Total Grupos</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-book"></i>
        </div>
        <div class="stat-content">
          <h3>{{ totalLessons }}</h3>
          <p>Total Lecciones</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="stat-content">
          <h3>{{ groups.length > 0 ? (totalLessons / groups.length).toFixed(1) : 0 }}</h3>
          <p>Promedio por Grupo</p>
        </div>
      </div>
    </div>

    <!-- Grupos recientes -->
    <div class="section">
      <div class="section-header">
        <h3><i class="fas fa-layer-group"></i> Mis Grupos Académicos</h3>
        <button class="btn btn-primary" routerLink="/academia/groups/create">
          <i class="fas fa-plus"></i> Crear Nuevo Grupo
        </button>
      </div>

      <div *ngIf="groups.length === 0" class="empty-state">
        <i class="fas fa-users fa-3x text-muted"></i>
        <h4>No tienes grupos académicos</h4>
        <p>Crea tu primer grupo para comenzar a trabajar con estudiantes</p>
        <button class="btn btn-primary" routerLink="/academia/groups/create">
          <i class="fas fa-plus"></i> Crear Primer Grupo
        </button>
      </div>

      <div *ngIf="groups.length > 0" class="groups-grid">
        <div *ngFor="let group of groups" class="group-card" [routerLink]="['/academia/groups', group._id]">
          <div class="group-header">
            <h4>{{ group.name }}</h4>
            <span class="badge" [ngClass]="group.isActive ? 'bg-success' : 'bg-secondary'">
              {{ group.isActive ? 'Activo' : 'Inactivo' }}
            </span>
          </div>
          <p class="group-description">{{ group.description }}</p>
          <div class="group-details">
            <div class="detail-item">
              <i class="fas fa-graduation-cap"></i>
              <span>{{ group.academicLevel }} - {{ group.grade }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-book"></i>
              <span>{{ group.subjects ? group.subjects.join(', ') : 'Sin asignaturas' }}</span>
            </div>
            <div class="detail-item">
              <i class="fas fa-users"></i>
              <span>{{ group.students.length }} estudiantes</span>
            </div>
          </div>
          <div class="group-stats">
            <div class="stat">
              <small>Lecciones</small>
              <strong>{{ getGroupLessonsCount(group) }}</strong>
            </div>
            <div class="stat">
              <small>Activas</small>
              <strong>{{ getGroupActiveLessonsCount(group) }}</strong>
            </div>
            <div class="stat">
              <small>Completadas</small>
              <strong>{{ getGroupCompletedLessonsCount(group) }}</strong>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lecciones recientes -->
    <div class="section">
      <div class="section-header">
        <h3><i class="fas fa-book"></i> Lecciones Recientes</h3>
        <button class="btn btn-outline-primary" routerLink="/academia/lessons">
          Ver Todas
        </button>
      </div>

      <div *ngIf="recentLessons.length === 0" class="empty-state">
        <i class="fas fa-book fa-3x text-muted"></i>
        <h4>No hay lecciones recientes</h4>
        <p>Las lecciones creadas por tus estudiantes aparecerán aquí</p>
      </div>

      <div *ngIf="recentLessons.length > 0" class="lessons-list">
        <!-- Aquí se mostrarían las lecciones recientes -->
      </div>
    </div>
  </div>
</div>
